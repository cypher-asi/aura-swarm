# Secrets for Aura Swarm
# Values are injected from .secrets/ folder during deployment
# DO NOT commit actual secrets to this file!
---
apiVersion: v1
kind: Secret
metadata:
  name: aura-swarm-secrets
  namespace: swarm-system
type: Opaque
stringData:
  # LLM API Keys (injected from .secrets/ folder)
  ANTHROPIC_API_KEY: "__ANTHROPIC_API_KEY__"
  OPENAI_API_KEY: "__OPENAI_API_KEY__"
  
  # Zero-ID authentication (injected from .secrets/ folder)
  ZERO_ID_SECRET: "__ZERO_ID_SECRET__"
---
# Secrets for agent pods (same keys, different namespace)
apiVersion: v1
kind: Secret
metadata:
  name: aura-swarm-secrets
  namespace: swarm-agents
type: Opaque
stringData:
  # LLM API Keys (injected from .secrets/ folder)
  ANTHROPIC_API_KEY: "__ANTHROPIC_API_KEY__"
  OPENAI_API_KEY: "__OPENAI_API_KEY__"
---
# Configuration for Aura Swarm services
apiVersion: v1
kind: ConfigMap
metadata:
  name: aura-swarm-config
  namespace: swarm-system
data:
  # Logging
  RUST_LOG: "info,aura_swarm=debug"
  
  # Service addresses for cross-service communication
  GATEWAY_URL: "http://aura-swarm-gateway.swarm-system.svc:8080"
  SCHEDULER_URL: "http://aura-swarm-scheduler.swarm-system.svc:8080"
  # Deprecated - use GATEWAY_URL
  CONTROL_PLANE_URL: "http://aura-swarm-gateway.swarm-system.svc:8080"
  
  # Listen addresses
  GATEWAY_LISTEN_ADDR: "0.0.0.0:8080"
  CONTROL_LISTEN_ADDR: "0.0.0.0:8080"
  
  # Scheduler configuration
  SCHEDULER_NAMESPACE: "swarm-agents"
  STATE_PVC_NAME: "swarm-agent-state"
  
  # Aura runtime image - UPDATE THIS after running ./07-build-images.sh --all
  # Format: ECR_REGISTRY/aura-swarm-ENVIRONMENT-runtime:IMAGE_TAG
  AURA_RUNTIME_IMAGE: "909208902094.dkr.ecr.us-east-2.amazonaws.com/aura-swarm-dev-runtime:latest"
  
  # Isolation level: "microvm" (default, uses kata-fc) or "container" (uses runc)
  DEFAULT_ISOLATION: "microvm"
